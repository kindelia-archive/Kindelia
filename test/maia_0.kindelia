type Nat {
  zero{}
  succ{pred: Nat}
}

save

// -----------------------------------------------------------------------------

bond double(x: Nat): Nat {
  case x : Nat {
    zero: Nat@zero{}
    succ: Nat@succ{pred: Nat@succ{pred: double(x.pred)}}
  }
}

eval {
  double(Nat@succ{pred: Nat@succ{pred: Nat@succ{pred: Nat@zero{}}}})
} : Nat

save

// -----------------------------------------------------------------------------

file inc@count : #word = #0

bond inc(): & #word {
  get x     = count
  set count = +(x, #1)
  return #0
}

eval {
  run inc()
  run inc()
  run inc()
  get x = count
  return x
} : & #word

save

// -----------------------------------------------------------------------------
