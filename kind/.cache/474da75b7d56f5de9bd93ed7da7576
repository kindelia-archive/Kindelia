#state ((state # Litereum.Runtime.Term) #world #subst #fresh #gas #term ((((((((((term #term Litereum.Runtime.Term) #term.name ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (((Maybe.default Litereum.Term) (((Map.get Litereum.Term) term.name) subst)) term))) #term.bond #term.args (((((Litereum.get_bond world) term.bond) # Litereum.Runtime.Term) state) #bond !bond = bond; ((bond #bond Litereum.Runtime.Term) #bond.name #bond.owners #bond.input_names #bond.input_types #bond.output_type #bond.main (((((Litereum.rename.many ((Map.from_list String) (List.nil ((Pair String) String)))) fresh) bond.input_names) # Litereum.Runtime.Term) #table #fresh #input_names ((((((Litereum.sanitize world) table) fresh) bond.main) # Litereum.Runtime.Term) #fresh #main !subst = ((((Litereum.extend Litereum.Term) subst) input_names) term.args); (Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) main))))))) #term.name #term.type #term.expr #term.body (Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) ((((Map.set Litereum.Term) term.name) term.expr) subst)) fresh) gas) term.body))) #term.ctor #term.vals state) #term.name #term.data #term.cses (((Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (((Maybe.default Litereum.Term) (((Map.get Litereum.Term) term.name) subst)) (Litereum.Term.word (U64.from_nat +0))))) # Litereum.Runtime.Term) #world #subst #fresh #gas #expr ((((((((((expr #expr Litereum.Runtime.Term) #expr.name state) #expr.bond #expr.args state) #expr.name #expr.type #expr.expr #expr.body state) #expr.ctor #expr.vals (((((Litereum.get_data world) term.data) # Litereum.Runtime.Term) state) #data !data = data; ((data #data Litereum.Runtime.Term) #data.name #data.constructors (((((Litereum.get_constructor_value data) expr.ctor) # Litereum.Runtime.Term) state) #ctor !ctor = ctor; ((ctor #ctor Litereum.Runtime.Term) #ctor.name #ctor.field_names #ctor.field_types (((((Litereum.get_constructor_index data) expr.ctor) # Litereum.Runtime.Term) state) #indx ((((((List.get Litereum.Term) indx) term.cses) # Litereum.Runtime.Term) state) #body !nams = ((((List.map String) String) (String.concat ((String.concat term.name) "."))) ((ctor # (List String)) #name #field_names #field_types field_names)); !subst = ((((Litereum.extend Litereum.Term) subst) nams) expr.vals); (Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) body))))))))) #expr.name #expr.data #expr.cses state) #expr.numb state) #expr.val0 #expr.val1 #expr.iflt #expr.ifeq #expr.ifgt state) #expr.oper #expr.val0 #expr.val1 state) #expr.name #expr.main #expr.body state))) #term.numb state) #term.val0 #term.val1 #term.iflt #term.ifeq #term.ifgt (((Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) term.val0)) # Litereum.Runtime.Term) #world #subst #fresh #gas #val0 (((Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) term.val1)) # Litereum.Runtime.Term) #world #subst #fresh #gas #val1 ((((((((((val0 #val0 Litereum.Runtime.Term) #val0.name ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.bond #val0.args ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.name #val0.type #val0.expr #val0.body ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.ctor #val0.vals ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.name #val0.data #val0.cses ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.numb ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb ((((((U64.cmp val0.numb) val0.numb) #self Litereum.Runtime.Term) (Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) term.iflt))) (Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) term.ifeq))) (Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) term.ifgt)))) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.val0 #val0.val1 #val0.iflt #val0.ifeq #val0.ifgt ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.oper #val0.val0 #val0.val1 ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.name #val0.main #val0.body ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state))))) #term.oper #term.val0 #term.val1 (((Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) term.val0)) # Litereum.Runtime.Term) #world #subst #fresh #gas #val0 (((Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) term.val1)) # Litereum.Runtime.Term) #world #subst #fresh #gas #val1 ((((((((((val0 #val0 Litereum.Runtime.Term) #val0.name ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.bond #val0.args ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.name #val0.type #val0.expr #val0.body ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.ctor #val0.vals ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.name #val0.data #val0.cses ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.numb ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb (((((((((term.oper #term.oper Litereum.Runtime.Term) ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (Litereum.Term.word ((U64.add val0.numb) val1.numb)))) ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (Litereum.Term.word ((U64.sub val0.numb) val1.numb)))) ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (Litereum.Term.word ((U64.mul val0.numb) val1.numb)))) ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (Litereum.Term.word ((U64.div val0.numb) val1.numb)))) ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (Litereum.Term.word ((U64.mod val0.numb) val1.numb)))) ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (Litereum.Term.word ((U64.or val0.numb) val1.numb)))) ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (Litereum.Term.word ((U64.and val0.numb) val1.numb)))) ((((((Litereum.Runtime.new Litereum.Term) world) subst) fresh) gas) (Litereum.Term.word ((U64.xor val0.numb) val1.numb))))) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.val0 #val0.val1 #val0.iflt #val0.ifeq #val0.ifgt ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.oper #val0.val0 #val0.val1 ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state)) #val0.name #val0.main #val0.body ((((((((((val1 #val1 Litereum.Runtime.Term) #val1.name state) #val1.bond #val1.args state) #val1.name #val1.type #val1.expr #val1.body state) #val1.ctor #val1.vals state) #val1.name #val1.data #val1.cses state) #val1.numb state) #val1.val0 #val1.val1 #val1.iflt #val1.ifeq #val1.ifgt state) #val1.oper #val1.val0 #val1.val1 state) #val1.name #val1.main #val1.body state))))) #term.name #term.main #term.body (((((Litereum.get_bond world) term.name) # Litereum.Runtime.Term) state) #bond !bond = bond; ((bond #bond Litereum.Runtime.Term) #bond.name #bond.owners #bond.input_names #bond.input_types #bond.output_type #bond.main !nams = bond.input_names; !vals = ((((List.map String) Litereum.Term) Litereum.Term.var) bond.input_names); ((state # Litereum.Runtime.Term) #world #subst #fresh #gas #term (((Debug.log Litereum.Runtime.Term) ((String.concat "-- rebind ") term.name)) # (((Debug.log Litereum.Runtime.Term) ((String.concat "--- from: ") ((Litereum.show.term world) term.main))) # (((Litereum.normalize ((((((Litereum.Runtime.new Litereum.Term) world) ((((Litereum.extend Litereum.Term) subst) nams) vals)) fresh) gas) term.main)) # Litereum.Runtime.Term) #world #_ #fresh #gas #main (((Debug.log Litereum.Runtime.Term) ((String.concat "--- to: ") ((Litereum.show.term world) main))) # !new_entry = (Litereum.Entry.bond ((bond # Litereum.Bond) #name #owners #input_names #input_types #output_type #main ((((((Litereum.Bond.new name) owners) input_names) input_types) output_type) main^1))); !new_world = ((world # Litereum.World) #name_count #name_to_index #index_to_name #entry ((((Litereum.World.new name_count) name_to_index) index_to_name) ((((Map.set Litereum.Entry) term.name) new_entry) ((world # (Map Litereum.Entry)) #name_count #name_to_index #index_to_name #entry entry)))); (Litereum.reduce ((((((Litereum.Runtime.new Litereum.Term) new_world) subst) fresh) gas) term.body)))))))))))